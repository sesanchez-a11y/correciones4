@startuml EduMentor_Arquitectura_Capas
title EduMentor - Arquitectura de Capas

package "üñ•Ô∏è CAPA DE PRESENTACI√ìN (Frontend)" <<cloud>> {
    component "HTML5" as HTML {
        [inicio.html]
        [perfil.html]
        [cursos.html]
        [reservas.html]
        [pagos.html]
        [historial.html]
        [tienda.html]
    }
    
    component "CSS3" as CSS {
        [inicio.css]
        [perfil.css]
        [cursos.css]
        [reservas.css]
        [pagos.css]
    }
    
    component "JavaScript Vanilla" as JS {
        [inicio.js]
        [perfil.js]
        [iniciodecesion.js]
        [reseccion.js]
        [cursos.js]
        [historial.js]
        [pagos.js]
    }
    
    component "Bootstrap 5" as BOOTSTRAP {
        [Componentes UI]
    }
    
    component "Tailwind CSS" as TAILWIND {
        [Estilos Utilities]
    }
}

package "üåê CAPA DE API (ASP.NET Core 9.0)" <<cloud>> {
    component "Controllers" {
        [ControladorDeSesion]
        [ReservasController]
        [DebugController]
    }
    
    component "Middleware" {
        [JWT Authentication]
        [CORS]
    }
    
    component "Servicios" {
        [Autenticaci√≥n]
        [Notificaciones]
        [Procesamiento de Pagos]
    }
}

package "üìä CAPA DE MODELOS Y L√ìGICA" <<cloud>> {
    component "Modelos de Dominio" {
        [Usuario (base)]
        [Estudiante]
        [Tutor]
        [Servicio]
        [Reserva]
        [Pago]
        [Notificacion]
    }
    
    component "Interfaces" {
        [IUsuarioRepository]
        [INotificacion]
        [IPago]
        [IPrecioStrategy]
    }
    
    component "Patrones" {
        [Repository Pattern]
        [Observer Pattern]
        [Strategy Pattern]
        [Factory Pattern]
    }
}

package "üíæ CAPA DE DATOS" <<database>> {
    component "Repositorios" {
        [InMemoryUsuarioRepository\n(Desarrollo)]
        [MongoUsuarioRepository\n(Producci√≥n)]
    }
    
    component "MongoDB" as MONGODB {
        database "EduMentor" {
            [Colecci√≥n: Usuarios]
            [Colecci√≥n: Reservas]
            [Colecci√≥n: Pagos]
            [Colecci√≥n: Servicios]
        }
    }
}

package "üîê SEGURIDAD" <<cloud>> {
    component "Autenticaci√≥n" {
        [BCrypt (Hash)]
        [JWT (Tokens)]
        [[Authorize] Atributo]
    }
    
    component "Validaci√≥n" {
        [Entrada]
        [Email]
        [Contrase√±a]
    }
}

' Relaciones entre capas

HTML --> JS: Activa
JS --> CSS: Aplica estilos
HTML --> CSS: Aplica estilos
JS --> BOOTSTRAP: Utiliza
BOOTSTRAP --> BOOTSTRAP: Componentes
JS --> TAILWIND: Utiliza

JS --> JWT: Env√≠a token en\nHeader Authorization
JS --> Middleware: Realiza peticiones AJAX

Middleware --> Controllers: Enruta solicitudes

Controllers --> IUsuarioRepository: Utiliza (Inyecci√≥n DI)
Controllers --> Servicios: Ejecuta l√≥gica

Servicios --> "Modelos de Dominio": Procesa
"Modelos de Dominio" --> Patrones: Implementa

IUsuarioRepository --> Repositorios: Define contrato

Repositorios --> MONGODB: Lee/Escribe datos

Autenticaci√≥n --> Repositorios: Valida credenciales
Validaci√≥n --> Controllers: Valida entrada

' Notas

note right of HTML
  **Responsabilidad**:
  - Estructura de p√°gina
  - Elementos interactivos
  - Navegaci√≥n
end note

note right of JS
  **Responsabilidad**:
  - L√≥gica de cliente
  - Comunicaci√≥n con API
  - Manejo de almacenamiento local
  - Validaci√≥n en cliente
end note

note right of Controllers
  **Responsabilidad**:
  - Recibir peticiones HTTP
  - Procesar solicitudes
  - Coordinar servicios
  - Retornar respuestas
end note

note right of "Modelos de Dominio"
  **Responsabilidad**:
  - Representar conceptos del negocio
  - Almacenamiento BSON en MongoDB
  - L√≥gica de dominio
end note

note right of Repositorios
  **Responsabilidad**:
  - Abstracci√≥n de acceso a datos
  - CRUD operations
  - Queries a MongoDB
  - In-Memory para testing
end note

note right of MONGODB
  **Caracter√≠sticas**:
  - NoSQL Document DB
  - Almacenamiento flexible
  - Consultas en JSON
  - Replicaci√≥n nativa
end note

@enduml
